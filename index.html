
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Formulario de Asignación de Agente</title>
</head>
<body>
    <h2>Formulario de Predicción de Agente</h2>
    <form id="cliente-form">
        <label>Tipo de servicio:</label><br>
        <select name="tipo_servicio">
            <option>Adquisicion de propiedad</option>
            <option>Adquisicion de proyecto</option>
            <option>Asesoria de inversion</option>
            <option>Alquiler de propiedad</option>
            <option>Tasacion de propiedad</option>
        </select><br><br>

        <label>Zona:</label><br>
        <select name="zona_propiedad">
            <option>La Romana</option>
            <option>Santo Domingo</option>
            <option>Santiago</option>
            <option>Punta Cana</option>
        </select><br><br>

        <label>Modalidad:</label><br>
        <select name="modalidad_cliente">
            <option>Presencial</option>
            <option>Virtual</option>
        </select><br><br>

        <label>Idioma:</label><br>
        <select name="idioma_cliente">
            <option>Español</option>
            <option>Ingles</option>
        </select><br><br>

        <label>Precio estimado (RD$):</label><br>
        <input type="number" name="precio_estimado" required><br><br>

        <button type="submit">Enviar</button>
    </form>

    <h3>Resultado:</h3>
    <pre id="resultado"></pre>

    <script>
    document.getElementById('cliente-form').addEventListener('submit', async function(e) {
        e.preventDefault();

        const form = e.target;
        const fecha = new Date();
        const payload = {
            Inputs: {
                input1: [{
                    codigo_agente: "",
                    tipo_servicio: form.tipo_servicio.value,
                    zona_propiedad: form.zona_propiedad.value,
                    modalidad_cliente: form.modalidad_cliente.value,
                    idioma_cliente: form.idioma_cliente.value,
                    precio_estimado: parseFloat(form.precio_estimado.value),
                    idioma_agente: "",  // Será calculado en backend
                    idioma_match: false,
                    dias_laborales: 0,
                    horas_laborales_dia: 0,
                    horas_disponibles_total: 0,
                    modalidad_agente: "",
                    tipo_jornada: "",
                    modalidad_match: false,
                    tickets_activos_agente: 0,
                    segmento_precio: "",  // Se puede calcular desde el precio
                    año: fecha.getFullYear(),
                    mes: fecha.getMonth() + 1,
                    dia_semana: fecha.getDay()
                }]
            },
            GlobalParameters: {}
        };

        const response = await fetch("https://TU_LOGIC_APP_URL", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
        });

        const data = await response.json();
        document.getElementById('resultado').innerText = JSON.stringify(data, null, 2);
    });
    </script>
</body>
</html>
